self.addEventListener("push",(t=>{let i={};try{i=t.data.json()}catch{i={title:"Cerita Baru!",body:"Klik untuk lihat cerita terbaru.",url:"/#/detail/123"}}t.waitUntil(self.registration.showNotification(i.title,{body:i.body,icon:"/images/icon-192.png",badge:"/images/icon-192.png",data:{url:i.url||"/"}}))})),self.addEventListener("notificationclick",(t=>{t.notification.close();const i=t.notification.data.url||"/";t.waitUntil(clients.matchAll({type:"window"}).then((t=>{for(const n of t)if(n.url===i&&"focus"in n)return n.focus();return clients.openWindow(i)})))}));